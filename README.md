# gpt-artifact-scrub
Универсальный scrubber для GPT-текстов: чистит невидимые символы, правит пунктуацию и пробелы, сохраняет структуру Markdown.

## Telegram-бот: «Убираю признаки ИИ из вашего текста»

Функции бота:
- Заменяет длинные тире (– — −) на `-`.
- Заменяет кавычки-ёлочки и типографские кавычки на `"`.
- Приводит маркеры списков в начале строк к `- `.
- Убирает неразрывные пробелы.
- Ведёт пер-пользовательские логи в `./data/user/{id}/history.jsonl` с ограничением размера.

### Быстрый старт

1) Установить зависимости:

```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

2) Настроить переменные окружения:

Скопируйте `.env.example` в `.env` и заполните:

```
TELEGRAM_BOT_TOKEN=ваш_токен_бота
USER_LOG_MAX_BYTES=1048576
```

3) Запуск:

```bash
python src/bot.py
```

После запуска отправьте боту команду `/start`.

### Логи

- Путь: `./data/user/{id}/history.jsonl`
- Формат: JSON Lines, каждая строка — отдельный запрос с полями: `ts`, `type`, `user`, `input_len`, `output_len`, `stats`.
- Ограничение: `USER_LOG_MAX_BYTES` (по умолчанию 1 MiB). При переполнении сохраняются последние ~70% строк.

### Пайплайн взаимодействия

- Пользователь жмёт `/start` — бот отвечает: «Убираю признаки ИИ из вашего текста. Просто отправьте ваш текст…»
- Пользователь отправляет текст — бот:
	- возвращает очищенный текст (готов к копированию);
	- следом присылает краткую сводку: «Заменил: тире N, кавычки M, маркеры списков K, …» либо «Ничего не пришлось заменять…».
